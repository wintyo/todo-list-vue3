var W=Object.defineProperty,K=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var b=(o,e,t)=>e in o?W(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,V=(o,e)=>{for(var t in e||(e={}))q.call(e,t)&&b(o,t,e[t]);if(S)for(var t of S(e))H.call(e,t)&&b(o,t,e[t]);return o},w=(o,e)=>K(o,j(e));import{v as J,n as z,r as y,d as v,w as A,o as _,c as g,a as l,b as k,e as Q,u as c,p as I,f as $,g as C,h as O,t as G,i as X,j as N,F as x,k as D,l as B,m as U,q as Y,s as Z,x as oo}from"./vendor.903a45c7.js";const eo=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const r of d.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerpolicy&&(d.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?d.credentials="include":n.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(n){if(n.ep)return;n.ep=!0;const d=t(n);fetch(n.href,d)}};eo();function to(o={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:s,onRegistered:n,onRegisterError:d}=o;let r,u;const p=async(a=!0)=>{a&&(r==null||r.addEventListener("controlling",i=>{i.isUpdate&&window.location.reload()})),u&&u.waiting&&await z(u.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){r=new J("./sw.js",{scope:"./",type:"classic"}),r.addEventListener("activated",a=>{a.isUpdate||s==null||s()});{const a=()=>{t==null||t()};r.addEventListener("waiting",a),r.addEventListener("externalwaiting",a)}r.register({immediate:e}).then(a=>{u=a,n==null||n(a)}).catch(a=>{d==null||d(a)})}return p}function M(o){const e=y(o);return{refs:e,setRef:t=>s=>{e[t]=s}}}var h=(o,e)=>{const t=o.__vccOpts||o;for(const[s,n]of e)t[s]=n;return t};const no=v({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:e}){const t=o;A(()=>t.modelValue,r=>{const{elDialog:u}=s;u!=null&&(r?u.showModal():u.close())});const{refs:s,setRef:n}=M({elDialog:null}),d=()=>{e("update:modelValue",!1)};return(r,u)=>(_(),g("dialog",{class:"dialog",ref:c(n)("elDialog"),onClick:d},[l("div",{onClick:u[0]||(u[0]=Q(()=>{},["stop"]))},[k(r.$slots,"default",{},void 0,!0)])],512))}});var E=h(no,[["__scopeId","data-v-cff4f6c8"]]);const so=o=>(I("data-v-288ce5ea"),o=o(),$(),o),ao=["open"],lo={class:"header"},io=so(()=>l("div",{class:"header__icon"},null,-1)),ro={class:"header__content"},uo={class:"content"},po=v({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:e}){const t=o,s=n=>{n.currentTarget instanceof HTMLElement&&e("update:modelValue",n.currentTarget.getAttribute("open")!=null)};return(n,d)=>(_(),g("details",{class:"details",open:t.modelValue,onToggle:s},[l("summary",lo,[io,l("div",ro,[k(n.$slots,"head",{},void 0,!0)])]),l("div",uo,[k(n.$slots,"default",{},void 0,!0)])],40,ao))}});var co=h(po,[["__scopeId","data-v-288ce5ea"]]);const _o={key:0,class:"dialog-content"},mo=v({props:{title:null},setup(o,{expose:e}){const t=o,s=y({isOpen:!1,dialogOption:void 0}),n=a=>{s.dialogOption=a,s.isOpen=!0},d=()=>{s.isOpen=!1,s.dialogOption&&s.dialogOption.onClose&&s.dialogOption.onClose()},r=a=>{s.isOpen=a,s.dialogOption=void 0},u=()=>{s.dialogOption&&s.dialogOption.okAction?s.dialogOption.okAction():d()},p=()=>{s.dialogOption&&s.dialogOption.ngAction?s.dialogOption.ngAction():d()};return e({open:n,close:d}),(a,i)=>(_(),C(E,{modelValue:c(s).isOpen,"onUpdate:modelValue":r},{default:O(()=>[c(s).dialogOption?(_(),g("div",_o,[l("div",null,G(t.title),1),l("div",{class:"action-row"},[l("button",{onClick:p},"NG"),l("button",{style:{"margin-left":"4px"},onClick:u},"OK")])])):X("",!0)]),_:1},8,["modelValue"]))}});var fo=h(mo,[["__scopeId","data-v-681c7e17"]]);const go={class:"check-area"},vo=["checked"],ho=v({props:{todo:null},emits:["update:todo"],setup(o,{emit:e}){const t=o,s=n=>{const d=n.currentTarget;d instanceof HTMLInputElement&&e("update:todo",w(V({},t.todo),{isChecked:d.checked}))};return(n,d)=>(_(),g("div",null,[l("label",go,[l("input",{type:"checkbox",checked:t.todo.isChecked,onChange:s},null,40,vo),l("span",null,G(t.todo.text),1)])]))}});var Oo=h(ho,[["__scopeId","data-v-27da0c8d"]]);const yo={class:"header"},To=["disabled"],ko=v({props:{groupName:null,isOpen:{type:Boolean},todos:null},emits:["update:todoGroup","remove","add:todo","update:todo"],setup(o,{emit:e}){const t=o,{refs:s,setRef:n}=M({dialog:null}),d=y({todoName:""}),r=i=>{e("update:todoGroup",{groupName:t.groupName,isOpen:i,todos:t.todos})},u=()=>{const{dialog:i}=s;i!=null&&i.open({okAction:()=>{e("remove"),i.close()}})},p=(i,f)=>{e("update:todo",i,f)},a=i=>{i.preventDefault(),e("add:todo",{text:d.todoName,isChecked:!1}),d.todoName=""};return(i,f)=>(_(),g("div",null,[N(co,{modelValue:t.isOpen,"onUpdate:modelValue":r},{head:O(()=>[l("div",yo,[l("div",null,G(t.groupName),1),l("button",{onClick:u},"delete")])]),default:O(()=>[l("div",null,[(_(!0),g(x,null,D(t.todos,(m,T)=>(_(),C(Oo,{todo:m,"onUpdate:todo":P=>p(T,P)},null,8,["todo","onUpdate:todo"]))),256))]),l("form",{onSubmit:a},[B(l("input",{"onUpdate:modelValue":f[0]||(f[0]=m=>c(d).todoName=m),placeholder:"TODO"},null,512),[[U,c(d).todoName]]),l("button",{style:{"margin-left":"4px"},type:"submit",disabled:c(d).todoName===""},"\u8FFD\u52A0",8,To)],32)]),_:1},8,["modelValue"]),N(fo,{ref:c(n)("dialog"),title:"\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F"},null,512)]))}});var No=h(ko,[["__scopeId","data-v-6c3c6c78"]]);function Co(){const o=localStorage.getItem("piniaState");try{return JSON.parse(o||"").todo}catch{return{todoGroups:[]}}}const Go=Y("todo",{state:Co,actions:{addTodoGroup(o){this.todoGroups.unshift({groupName:o,isOpen:!1,todos:[]})},updateTodoGroup(o,e){this.todoGroups[o]=e},removeTodoGroup(o){this.todoGroups.splice(o,1)},addTodo(o,e){this.todoGroups[o].todos.push(e)},updateTodo(o,e,t){this.todoGroups[o].todos[e]=t},removeTodo(o,e){this.todoGroups[o].todos.splice(e,1)}}});const F=o=>(I("data-v-5589632d"),o=o(),$(),o),So={class:"app"},bo=F(()=>l("h1",null,"TODO\u30EA\u30B9\u30C8",-1)),Vo=F(()=>l("button",{style:{"margin-left":"8px"},type:"submit"},"\u4F5C\u6210",-1)),wo=v({setup(o){const e=Go(),t=y({isModalOpen:!1,inputTodoGroupName:"",isAccordionOpen:!1}),s=(p,a)=>{e.updateTodoGroup(p,a)},n=p=>{e.removeTodoGroup(p)},d=(p,a)=>{e.addTodo(p,a)},r=(p,a,i)=>{e.updateTodo(p,a,i)},u=p=>{p.preventDefault(),console.log("submit",t.inputTodoGroupName),e.addTodoGroup(t.inputTodoGroupName),t.inputTodoGroupName="",t.isModalOpen=!1};return(p,a)=>(_(),g("div",So,[bo,l("button",{style:{"margin-bottom":"8px"},onClick:a[0]||(a[0]=i=>c(t).isModalOpen=!0)},"TODO\u30B0\u30EB\u30FC\u30D7\u4F5C\u6210"),l("div",null,[(_(!0),g(x,null,D(c(e).todoGroups,(i,f)=>(_(),C(No,{groupName:i.groupName,isOpen:i.isOpen,todos:i.todos,"onUpdate:todoGroup":m=>s(f,m),onRemove:m=>n(f),"onAdd:todo":m=>d(f,m),"onUpdate:todo":(m,T)=>{r(f,m,T)}},null,8,["groupName","isOpen","todos","onUpdate:todoGroup","onRemove","onAdd:todo","onUpdate:todo"]))),256))]),N(E,{modelValue:c(t).isModalOpen,"onUpdate:modelValue":a[2]||(a[2]=i=>c(t).isModalOpen=i)},{default:O(()=>[l("form",{class:"modal-content",onSubmit:u},[B(l("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>c(t).inputTodoGroupName=i),placeholder:"TODO\u30B0\u30EB\u30FC\u30D7\u540D"},null,512),[[U,c(t).inputTodoGroupName]]),Vo],32)]),_:1},8,["modelValue"])]))}});var Ao=h(wo,[["__scopeId","data-v-5589632d"]]);to();const L=Z(Ao),R=oo();L.use(R);L.mount("#app");A(R.state,o=>{console.log(o),localStorage.setItem("piniaState",JSON.stringify(o))},{deep:!0});
